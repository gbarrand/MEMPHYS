<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;h1&gt;Build from source&lt;/h1&gt;</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><h1>Build from source</h1>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="memphys_build_11"></a>
Build from source a 11.x version</h1>
<p>The MEMPHYS package 11.x contains the simulation, some analysis programs and some .C ROOT scripts to produce plots from the MEMPHYS.root file produced by the MEMPHYS_sim program. This package is pretty close in structure than a Geant4 example and can be built with cmake (MEMPHYS_sim only) beside the bush way. The visualization had been displaced in the MEMPHYS_vis package.</p>
<p>The versions 11.x uses a Geant4 10.x. You have first to install such version of Geant4.</p>
<p>The below build instructions work on the file : </p><pre class="fragment">     MEMPHYS-&lt;version&gt;.zip
</pre><p> found on the download area.</p>
<h2><a class="anchor" id="memphys_build_11_cmake"></a>
Build with cmake the MEMPHYS_sim program</h2>
<p>To build with cmake the MEMPHYS_sim program against an already installed geant4 : </p><pre class="fragment">    UNIX&gt; cd MEMPHYS/cmake      # UNIX = Linux, macOS or Windows-10/cygwin.
    UNIX&gt; mkdir bin_cmake
    UNIX&gt; cd bin_cmake
     csh&gt; setenv Geant4_DIR &lt;geant4_install_dir&gt;/lib/Geant4-&lt;version&gt;  # customize toward your Geant4 installation !
    ( sh&gt; Geant4_DIR=&lt;geant4_install_dir&gt;/lib/Geant4-&lt;version&gt;;export Geant4_DIR )
    UNIX&gt; cmake ..
    UNIX&gt; make  # it builds MEMPHYS_sim.
    UNIX&gt; cd ../../exa_run
    UNIX&gt; &lt;edit in ../mgr/run_g410x_setup.csh g4data_home to point toward Geant4 data files&gt;
     csh&gt; source ../mgr/run_g410x_setup.csh
    ( sh&gt; . ../mgr/run_g410x_setup.sh )
    UNIX&gt; ../cmake/bin_cmake/MEMPHYS_sim  #it produces a MEMPHYS.root file.
</pre><p>If wanting to build MEMPHYS_sim without the production of the MEMPHYS.root file : </p><pre class="fragment">    cmake -DAPP_USE_INLIB_WROOT=OFF ..
</pre><h2><a class="anchor" id="memphys_build_11_bush"></a>
Build with bush</h2>
<p>To build with bush the MEMPHYS_sim program against an already installed geant4 : </p><pre class="fragment">      sh&gt; . &lt;geant4_install_dir&gt;/bin/geant4.sh
   ( csh&gt; source &lt;geant4_install_dir&gt;/bin/geant4.csh )
    UNIX&gt; geant4-config  # to test that this program is here.

   Linux&gt; &lt;if needed source setup a gcc_[version].[sh,csh] file to have the correct g++&gt;
  ( UNIX&gt; source gcc_493.csh # on Lund iridium )
  
    UNIX&gt; ./build -sys_geant4
  ( UNIX&gt; ./build -sys_geant4 -v  # to see built files.)
  ( UNIX&gt; ./build -sys_geant4 -x  # for a full trace.)
</pre><p> If wanting to run from this build area : </p><pre class="fragment">    UNIX&gt; &lt;in run_g410x_setup[.sh,.csh] edit the g4data_home variable to point to the geant4 10.x data&gt;
    UNIX&gt; cd ../exa_run
    UNIX&gt; ../mgr/&lt;bin_dir&gt;/MEMPHYS_sim  # it produces a MEMPHYS.root file.
</pre><p>At end of build, a zip file ready for a binary distribution should be under : </p><pre class="fragment">   bin_&lt;config&gt;/distrib/MEMPHYS-&lt;version&gt;-&lt;platform&gt;.zip
</pre><p>Someone can build also some X11 (or Windows) plotting programs working on the MEMPHYS.root data file produced by MEMPHYS_sim : </p><pre class="fragment">    UNIX&gt; ./build_app_read_plot
</pre><p> To build an offscreen plotting program using a MEMPHYS.root data file : </p><pre class="fragment">    UNIX&gt; ./build_app_read_plot_offscreen
</pre><p>If having CERN-ROOT : </p><pre class="fragment">    UNIX&gt; &lt;in cern_root_setup[.sh,.csh] edit root_home to point to your CERN-ROOT installation&gt;
      sh&gt; . ./cern_root_setup.sh
   or from a csh flavoured shell :
     csh&gt; source ./cern_root_setup.csh
    UNIX&gt; ./build_app_read_plot_ROOT  # do some plotting on a MEMPHYS.root data file, by using CERN-ROOT plotting.
    UNIX&gt; ./build_app_geomt_ROOT      # dump PMTs in a MEMPHYS.root data file, by using CERN-ROOT to read the file.
</pre><p>If these programs are built, you can do : </p><pre class="fragment">    UNIX&gt; ./build_distrib
</pre><p> to include these programs in the distribution zip file.</p>
<p>See the Usage section to run from the installation of a distribution.</p>
<h1><a class="anchor" id="memphys_build_10"></a>
Build from source a 10.x version</h1>
<p>The versions 10.x uses a Geant4 10.x. You have first to install such version of Geant4.</p>
<p>The build relies from the file : </p><pre class="fragment">     MEMPHYS-&lt;version&gt;.zip
</pre><p> found on the download area.</p>
<pre class="fragment">    UNIX&gt; &lt;unzip MEMPHYS source distribution file&gt;
    UNIX&gt; cd MEMPHYS/mgr
    UNIX&gt; &lt;in ./use_geant4 edit geant4_home to point to your geant4 10.x installation&gt;
    UNIX&gt; &lt;in run_g410x_setup[.sh,.csh] edit the g4data_home variable to point to the geant4 10.x data&gt;
   Linux&gt; &lt;if needed source setup a gcc_[version].[sh,csh] file to have the correct g++&gt;
   ( csh&gt; source gcc_493.csh # on Lund iridium )
    UNIX&gt; ./build
  ( UNIX&gt; ./build -v  # to see built files)
  ( UNIX&gt; ./build -x  # for a full trace)
</pre><p>If having CERN-ROOT : </p><pre class="fragment">    UNIX&gt; &lt;in cern_root_setup[.sh,.csh] edit root_home to point to your CERN-ROOT installation&gt;
      sh&gt; . ./cern_root_setup.sh
   or from a csh flavoured shell :
     csh&gt; source ./cern_root_setup.csh
    UNIX&gt; ./build -root
</pre><p>At end of build, a zip file ready for a binary distribution should be under : </p><pre class="fragment">   bin_&lt;config&gt;/distrib/MEMPHYS-&lt;version&gt;-&lt;platform&gt;.zip
</pre><p> See the Usage section to run from the installation of a distribution. </p>
</div></div><!-- contents -->

</body>
</html>
