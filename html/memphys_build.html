<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;h1&gt;Build from source&lt;/h1&gt;</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><h1>Build from source</h1>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The MEMPHYS package contains the simulation, some analysis programs and some .C ROOT scripts to produce plots from the MEMPHYS.root file produced by the MEMPHYS_sim program.</p>
<p>This package is pretty close in structure than a Geant4 example and can be built with cmake (MEMPHYS_sim only) beside the bush way. The visualization had been displaced in the MEMPHYS_vis package.</p>
<p>The below build instructions work on the file : </p><pre class="fragment">     MEMPHYS-&lt;version&gt;.zip
</pre><p> found on the download area, or from a github clone.</p>
<pre class="fragment"> ///////////////////////////////////////////////////////////////////////////////////////////////////////
 /// build by using the default geant4 found under inexlib/ourex: //////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
  To build :
    UNIX&gt; cd MEMPHYS/mgr
    UNIX&gt; ./build
  ( UNIX&gt; ./build -v  # to see built files.)
  ( UNIX&gt; ./build -x  # for a full trace.)

 (here UNIX is for Linux, macOS, Windows-10/cygwin, Windows-10/WSL)

  If the GNU parallel application is known from your prompt, you can use
 the "-parallel" option so that C and C++ file compilations are distributed
 on your cores. This feature had been tested with success on macOS with a MacPorts
 installation of the GNU parallel program and on centos7 with the GNU distribution.
 This can clearly boosts a lot the build of the ourex/geant4 package.

 You can build a binary zip distribution file with :
    UNIX&gt; ./build_distrib
    
 At end, you should have a binary zip distribution file :
    bin_&lt;config&gt;/distrib/MEMPHYS-&lt;version&gt;-&lt;platform&gt;.zip

 If wanting to run from this build area :
    UNIX&gt; &lt;in setenv_g4data[.sh,.csh] edit the g4data_home variable to point to the geant4 data directories&gt;
    UNIX&gt; cd ../exa_run
    UNIX&gt; ../mgr/&lt;bin_dir&gt;/MEMPHYS_sim  # it produces a MEMPHYS.root file.
    
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 To build the MEMPHYS_sim program against an already installed geant4 and by using cmake :
    UNIX&gt; cd &lt;install_path&gt;/MEMPHYS/MEMPHYS/cmake
    UNIX&gt; &lt;read README for instructions to build and run&gt;
 (UNIX here is for Linux, macOS. Not tested or Windows-10/cygwin, Windows-10/WSL).

 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 To build the MEMPHYS_sim program against an already installed geant4 by using the bush scripts :
    UNIX&gt; cd &lt;install_path/MEMPHYS/MEMPHYS/mgr
      sh&gt; . &lt;geant4_install_dir&gt;/bin/geant4.sh
   ( csh&gt; source &lt;geant4_install_dir&gt;/bin/geant4.csh )
    UNIX&gt; geant4-config  # to test that this program is here.

   Linux&gt; &lt;if needed source setup a gcc_[version].[sh,csh] file to have the correct g++&gt;
   ( csh&gt; source gcc_493.csh # on Lund iridium )
  
    UNIX&gt; ./build -sys_geant4
  ( UNIX&gt; ./build -sys_geant4 -v  # to see built files.)
  ( UNIX&gt; ./build -sys_geant4 -x  # for a full trace.)

 You can build a binary zip distribution file with :
    UNIX&gt; ./build_distrib
    
 At end, you should have a binary zip distribution file :
    bin_&lt;config&gt;/distrib/MEMPHYS-&lt;version&gt;-&lt;platform&gt;.zip

 If wanting to run from this build area :
    UNIX&gt; &lt;in setenv_g4data[.sh,.csh] edit the g4data_home variable to point to the geant4 data directories&gt;
    UNIX&gt; cd ../exa_run
    UNIX&gt; ../mgr/&lt;bin_dir&gt;/MEMPHYS_sim  # it produces a MEMPHYS.root file.
    
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 To build (not mendatory) some X11 (or Windows) plotting program using a MEMPHYS.root data file :
    UNIX&gt; ./build_app_read_plot
    
 To build an offscreen plotting program using a MEMPHYS.root data file :
    UNIX&gt; ./build_app_read_plot_offscreen

 If having CERN-ROOT :
    UNIX&gt; &lt;in cern_root_setup[.sh,.csh] edit root_home to point to your CERN-ROOT installation&gt;
      sh&gt; . ./cern_root_setup.sh
   ( csh&gt; source ./cern_root_setup.csh )
    UNIX&gt; ./build_app_read_plot_ROOT  # do some plotting on a MEMPHYS.root data file
                                      # by using CERN-ROOT plotting.
    UNIX&gt; ./build_app_geomt_ROOT      # dump PMTs in a MEMPHYS.root data file, by using CERN-ROOT
                                      # to read the file.

 If these programs are built build_distrib script will include them in the distribution file.

 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////

  See the MEMPHYS section on http://gbarrand.github.io for more.
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->

</body>
</html>
