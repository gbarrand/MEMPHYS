// Copyright (C) 2010, Guy Barrand. All rights reserved.
// See the file inlib.license for terms.

#ifndef inlib_sg_normal
#define inlib_sg_normal

#include "node"
#include "sf_vec"
#include "render_action"

#include <vector>

namespace inlib {
namespace sg {

class normal : public node {
  INLIB_NODE(normal,inlib::sg::normal,node)
public:
  sf_vec<vec3f,float> vec;
public:
  virtual const std::vector<field_desc>& node_fields() const {
    INLIB_FIELD_DESC_NODE_CLASS(inlib::sg::normal)
    static std::vector<field_desc> s_v;
    if(s_v.empty()) {
      s_v = parent::node_fields();
      INLIB_ADD_FIELD_DESC(vec)
    }
    return s_v;
  }
private:
  void add_fields(){
    add_field(&vec);
  }
public:
  virtual void render(render_action& a_action) {
    a_action.normal(vec.value());
  }
public:
  normal()
  :parent()
  ,vec(vec3f(0,0,1))
  {
    add_fields();
  }
  virtual ~normal(){}
public:
  normal(const normal& a_from)
  :parent(a_from)
  ,vec(a_from.vec)
  {
    add_fields();
  }
  normal& operator=(const normal& a_from){
    parent::operator=(a_from);
    vec = a_from.vec;
    return *this;
  }
};

}}

#endif
